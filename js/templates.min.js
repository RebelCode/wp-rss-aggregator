!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WPRA=e():t.WPRA=e()}("undefined"!=typeof self?self:this,function(){return webpackJsonpWPRA([1],{4:function(t,e,n){"use strict";function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!navigator.clipboard)return void i(t,e);navigator.clipboard.writeText(t).then(function(){},function(t){console.error("Async: Could not copy text: ",t)})}e.a=o;var i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e=e||document.body.parentElement;var n=document.createElement("textarea");n.value=t;var o=e.scrollTop;document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy")}catch(t){console.error("Fallback: Oops, unable to copy",t)}document.body.removeChild(n),e.scrollTop=o}},40:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return new F(t)}function a(t){return t&&"object"===(void 0===t?"undefined":H(t))&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function r(t){return Array.isArray(t)?[]:{}}function s(t,e){return e&&!0===e.clone&&a(t)?c(r(t),t,e):t}function l(t,e,n){var o=t.slice();return e.forEach(function(e,i){void 0===o[i]?o[i]=s(e,n):a(e)?o[i]=c(t[i],e,n):-1===t.indexOf(e)&&o.push(s(e,n))}),o}function u(t,e,n){var o={};return a(t)&&Object.keys(t).forEach(function(e){o[e]=s(t[e],n)}),Object.keys(e).forEach(function(i){a(e[i])&&t[i]?o[i]=c(t[i],e[i],n):o[i]=s(e[i],n)}),o}function c(t,e,n){var o=Array.isArray(e),i=n||{arrayMerge:l},a=i.arrayMerge||l;return o?Array.isArray(t)?a(t,e,n):s(e,n):u(t,e,n)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var h=n(42),f=n(43),m=n.n(f),v=n(8),y=n.n(v),b=n(45),g=n.n(b),_=n(46),w=n(3),k=n.n(w),x=n(47),A=n.n(x),T={props:{path:{},gate:{}},inject:["router"],methods:{getPath:function(){return this.router.buildRoute(this.path)},navigate:function(t){var e=!this.gate||this.gate();t.preventDefault(),e&&this.router.navigate(this.path)}},render:function(){var t=this,e=arguments[0],n=this.getPath();return e("a",k()([{attrs:{href:n}},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t.navigate.apply(t,[e].concat(o))}}}]),[this.$slots.default])}},S={props:{label:{},description:{},type:{},value:{},placeholder:{},options:{default:function(){return{}}}},methods:{inputNode:function(){var t=this,e=this.$createElement;return"checkbox"===this.type?e("input",k()([{attrs:{type:"checkbox",placeholder:this.placeholder},domProps:{checked:!!this.value}},{attrs:this.$attrs},{on:{change:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(){return t.$emit("input",!t.value)}).apply(void 0,[e].concat(o))}}}])):"select"!==this.type?e("input",k()([{attrs:{type:this.type,placeholder:this.placeholder},domProps:{value:this.value}},{attrs:this.$attrs},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.$emit("input",e.target.value)}).apply(void 0,[e].concat(o))}}}])):this.selectNode()},selectNode:function(){var t=this,e=this.$createElement,n=Object.keys(this.options).map(function(n){return e("option",{domProps:{value:n,selected:t.value===n}},[t.options[n]])});return e("select",k()([{attrs:this.$attrs},{on:{change:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.$emit("input",e.target.value)}).apply(void 0,[e].concat(o))}}}]),[n])}},render:function(){var t=arguments[0];return t("div",{class:"form-input"},[this.label?t("label",{class:"form-input__label"},[t("div",[this.label]),this.description?t("div",{class:"form-input__label-description"},[this.description]):""]):null,t("div",{class:"form-input__field"},[this.inputNode()])])}},P=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"wpra-bottom-panel"},[t._t("default")],2)},O=[],C={},j=C,L=n(1),W=Object(L.a)(j,P,O,!1,null,null,null);W.options.__file="BottomPanel.vue";var $=W.exports,R=function(t){return JSON.parse(JSON.stringify(t))},U=n(4),E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return o(this,t),this.data=e,this.primaryField=n,this}return t.prototype.find=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("object"!==(void 0===t?"undefined":E(t))&&null!==t){var n;n={},n[this.primaryField]=t,t=n}for(var o in this.data)if(this._isMatching(this.data[o],t))return this.data[o];return e},t.prototype.pluck=function(t){return this.data.map(function(e){return e[t]})},t.prototype.remove=function(t){for(var e in this.data)this._isMatching(this.data[e],t)&&this.data.splice(e,1);return this},t.prototype.appendDiff=function(t){for(var e=t,n=Array.isArray(e),o=0,e=n?e:e[Symbol.iterator]();;){var i;if(n){if(o>=e.length)break;i=e[o++]}else{if(o=e.next(),o.done)break;i=o.value}var a=i;this.contains(a)||this.data.push(a)}},t.prototype.prependDiff=function(t){for(var e=t.slice().reverse(),n=Array.isArray(e),o=0,e=n?e:e[Symbol.iterator]();;){var i;if(n){if(o>=e.length)break;i=e[o++]}else{if(o=e.next(),o.done)break;i=o.value}var a=i;this.contains(a)||this.data.unshift(a)}},t.prototype.contains=function(t){for(var e=this.data,n=Array.isArray(e),o=0,e=n?e:e[Symbol.iterator]();;){var i;if(n){if(o>=e.length)break;i=e[o++]}else{if(o=e.next(),o.done)break;i=o.value}if(i.id==t.id)return!0}return!1},t.prototype.filterValues=function(t){var e=this;return Object.keys(this.data).filter(function(n){return t(e.data[n],n)}).reduce(function(t,n){return t[n]=e.data[n],t},{})},t.prototype.filter=function(t){var e=this;return this.data.filter(function(n){return e._isMatching(n,t)})},t.prototype.whereIn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=[],o={};o[e]=null;for(var i=t,a=Array.isArray(i),r=0,i=a?i:i[Symbol.iterator]();;){var s;if(a){if(r>=i.length)break;s=i[r++]}else{if(r=i.next(),r.done)break;s=r.value}var l=s;o[e]=l;var u=this.find(o);u&&n.push(u)}return n},t.prototype.key=function(e){return new t(this.data.slice().reduce(function(t,n){return t[n[e]]=n,t},{}))},t.prototype.mapValues=function(t){var e=this;return Object.keys(this.data).map(function(n){e.data[n]=t(e.data[n],n)}),this},t.prototype.values=function(){return this.data},t.prototype._isMatching=function(t,e){if(!(t instanceof Object||e instanceof Object))return t==e;for(var n=!0,o=Object.keys(e),i=Array.isArray(o),a=0,o=i?o:o[Symbol.iterator]();;){var r;if(i){if(a>=o.length)break;r=o[a++]}else{if(a=o.next(),a.done)break;r=a.value}var s=r,l=t.hasOwnProperty(s)&&t[s]==e[s];n=n&&l}return n},t}(),N=i,D={data:function(){return{loading:!1,columns:{name:{label:"Template Name"},style:{label:"Template Style"},previewTemplate:{label:"Preview"}},filters:WpraTemplates.options.type,checked:[],filter:{paged:parseInt(this.router.params.paged||1),type:this.router.params.type||"",s:this.router.params.s||""},baseUrl:WpraTemplates.base_url,total:0}},inject:["hooks","http","router"],computed:{totalPages:function(){return Math.ceil(this.total/20)},list:{get:function(){return this.$store.state.templates.items},set:function(t){this.$store.commit("templates/set",t)}}},methods:{navigated:function(){var t=this;Object.keys(this.filter).forEach(function(e){t.filter[e]=t.router.params[e]||""}),this.filter.paged=parseInt(this.filter.paged||1),this.fetchList()},fetchList:function(){var t=this;this.loading=!0;var e=this.getParams(),n=parseInt(e.paged);return delete e.paged,n&&1!==n&&(e.page=n),this.http.get(this.baseUrl,{params:e}).then(function(e){t.list=e.data.items,t.total=e.data.count}).finally(function(){t.loading=!1})},deleteTemplate:function(t){var e=this;if(confirm("Are you sure you want to delete this template?"))return this.loading=!0,this.http.delete(this.baseUrl+"/"+t).then(function(){return e.fetchList()}).then(function(){e.loading=!1})},bulkDelete:function(){var t=this;if(confirm("Are you sure you want to delete selected templates?"))return this.loading=!0,this.http.delete(this.baseUrl,{params:{ids:this.checked}}).then(function(){return t.checked=[],t.$refs.table.checkedItems=[],t.fetchList()}).then(function(){t.loading=!1})},duplicateTemplate:function(t){var e=R(t);delete e.id,"__built_in"===e.type&&delete e.type,this.$store.commit("templates/updatePreset",e),this.router.navigate({name:"templates",params:{action:"new"}})},getPreviewLink:function(t){return WpraGlobal.admin_base_url+"?wpra_preview_template="+t.id},createTemplate:function(){this.$store.commit("templates/updatePreset",{}),this.router.navigate({name:"templates",params:{action:"new"}})},setChecked:function(t){var e=this;this.checked=t.filter(function(t){return"__built_in"!==N(e.list).find(t,{}).type})},getParams:function(){var t=this;return Object.keys(this.filter).filter(function(e){return!!t.filter[e]&&"all"!==t.filter[e]}).reduce(function(e,n){return e[n]=t.filter[n],e},{})},setFilter:function(t,e){this.filter[t]=e},submitFilter:function(){this.router.mergeParams(this.getParams())},getShortcode:function(t){return'[wp-rss-aggregator template="'+t.slug+'"]'},copyShortcode:function(t,e){t.preventDefault(),Object(U.a)(this.getShortcode(e));var n=t.target.innerText;t.target.classList.add("disabled"),t.target.innerText="Copied!",setTimeout(function(){t.target.classList.remove("disabled"),t.target.innerText=n},5e3)},getRowClass:function(t){return"__built_in"===t.type?"built-in":""}},render:function(){var t=this,e=arguments[0],n=function(t){return{name:"templates",params:{action:"edit",id:t}}},o=this.hooks.apply("wpra-templates-list-cells",this,{name:function(o){var i=o.row;return[e("div",[e("strong",[i.name]),e("small",{style:{paddingLeft:"4px",opacity:"0.6"}},[i.slug]),"__built_in"===i.type?e("span",{style:{opacity:"0.6",display:"block"}},["This is default feed template. Create your own copy by duplicating it ðŸ™Œ"]):null]),e("div",{class:"row-actions"},[e("span",{class:"edit"},[e("a",k()([{attrs:{href:"#"}},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(function(e){return t.copyShortcode(e,i)}).apply(void 0,[e].concat(o))}}}]),["Copy shortcode"])," |"]),e("span",{attrs:{className:"edit"},style:{paddingLeft:"4px"}},[e(T,{attrs:{path:n(i.id)}},["Edit"])," |"]),e("span",{class:"inline",style:{paddingLeft:"4px"}},[e("a",k()([{attrs:{href:"#"}},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(function(e){e.preventDefault(),t.duplicateTemplate(i)}).apply(void 0,[e].concat(o))}}}]),["Duplicate"])," ","__built_in"!==i.type?"|":""]),"__built_in"!==i.type?e("span",k()([{class:"trash",style:{paddingLeft:"4px"}},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(function(e){e.preventDefault(),t.deleteTemplate(i.id)}).apply(void 0,[e].concat(o))}}}]),[e("a",{attrs:{href:"#","aria-label":"Delete Item"},class:"submitdelete"},["Delete"])]):null])]},style:function(n){var o=n.row;return[e("div",[t.filters[o.type]])]},previewTemplate:function(n){var o=n.row;return[e("div",[e("a",{attrs:{href:t.getPreviewLink(o),target:"_blank"}},[e("span",{class:"dashicons dashicons-desktop"})])])]},filters:function(){var n={all:"Select Template Style",list:"List",grid:"Grid"};return[e(S,k()([{attrs:{type:"select",options:n,value:t.filter.type},style:{margin:0}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){t.filter.type=e,t.submitFilter()}).apply(void 0,[e].concat(o))}}}]))]}}),i=e("div",[e("h1",{class:"wp-heading-inline"},["Templates"]),e("a",k()([{class:"page-title-action",attrs:{href:"#"}},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){e.preventDefault(),t.createTemplate()}).apply(void 0,[e].concat(o))}}}]),["Add New"]),e("p",{class:"search-box",style:{padding:"10px"}},[e("label",{class:"screen-reader-text",attrs:{for:"post-search-input"}},["Search Templates:"]),e("input",k()([{attrs:{type:"search",id:"post-search-input",name:"s"},domProps:{value:this.filter.s}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.filter.s=e.target.value}).apply(void 0,[e].concat(o))},keyup:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.submitFilter.apply(t,[e].concat(o))}}}])),e("input",k()([{attrs:{type:"submit",id:"search-submit",value:"Search Templates"},class:"button"},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t.submitFilter.apply(t,[e].concat(o))}}}]))]),e("hr",{class:"wp-header-end"}),e(A.a,k()([{attrs:{columns:this.columns,rows:this.list,loading:this.loading,totalItems:this.total,perPage:20,totalPages:this.totalPages,currentPage:this.filter.paged,notFound:"No templates found.",rowClass:this.getRowClass},ref:"table",scopedSlots:o},{on:{checked:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t.setChecked.apply(t,[e].concat(o))},pagination:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){t.filter.paged=e,t.submitFilter()}).apply(void 0,[e].concat(o))}}}])),this.checked.length?e($,[e("div",{class:"flex-row"},[e("div",{class:"flex-col"},[e("div",{class:"wpra-bottom-panel__title"},["Bulk Actions"]),e("a",k()([{attrs:{href:"#"}},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){e.preventDefault(),t.bulkDelete()}).apply(void 0,[e].concat(o))}}}]),["Trash"])])])]):null]);return this.hooks.apply("wpra-templates-list",this,i)}},M={inject:["hooks"],data:function(){return{expanded:!0}},props:{title:{},id:{},submit:{type:Boolean,default:!1}},methods:{toggle:function(){this.expanded=!this.expanded}},render:function(){var t=this,e=arguments[0];return this.hooks.apply("postbox-"+this.id,this,e("div",{class:"postbox",attrs:{id:this.submit?"submitdiv":""}},[e("button",k()([{attrs:{type:"button","aria-expanded":"true"},class:"handlediv"},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t.toggle.apply(t,[e].concat(o))}}}]),[e("span",{class:"screen-reader-text"},["Toggle panel: ",this.title]),e("span",{class:"toggle-indicator",attrs:{"aria-hidden":"true"}})]),e("h2",k()([{class:"hndle ui-sortable-handle"},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t.toggle.apply(t,[e].concat(o))}}}]),[e("span",[this.title])]),e("div",{class:"inside"},[this.hooks.apply("postbox-content-"+this.id,this,[this.$slots.default])])]))}},I=M,G=Object(L.a)(I,void 0,void 0,!1,null,null,null);G.options.__file="Postbox.vue";var B=G.exports,V={render:function(){return(0,arguments[0])("div",{attrs:{id:"postbox-container-2"},class:"postbox-container"},[this.$slots.default])}},q={render:function(){return(0,arguments[0])("div",{attrs:{id:"postbox-container-1",className:"postbox-container"}},[this.$slots.default])}},J={render:function(){return(0,arguments[0])("div",{attrs:{id:"post-body"}},[this.$slots.default])}},z={props:{loading:{type:Boolean,default:!1}},render:function(){return(0,arguments[0])("button",{attrs:{disabled:this.loading},class:{button:!0,"loading-button":this.loading}},[this.$slots.default])}},H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};c.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,n){return c(t,n,e)})};var X=c,Y=n(48),K=n.n(Y),Q={data:function(){return{changes:{model:{}}}},methods:{isChanged:function(){return!K()(this.model,this.changes.model)},rememberModel:function(){this.$set(this.changes,"model",R(this.model))},cancelChanges:function(){confirm("Are you sure you want to cancel changes? This action cannot be reverted.")&&this.$set(this,"model",R(this.changes.model))}}},Z={mixins:[Q],data:function(){return{typeOptions:Object.keys(WpraTemplates.options.type).filter(function(t){return"_"!==t[0]}).reduce(function(t,e){return t[e]=WpraTemplates.options.type[e],t},{}),model:R(WpraTemplates.model_schema),validation:R(WpraTemplates.model_schema),baseUrl:WpraTemplates.base_url,isSaving:!1,isLoading:!1}},inject:["hooks","http","router","notification"],mounted:function(){this.resolveEditingItem()},computed:{previewUrl:function(){return WpraGlobal.admin_base_url+"?wpra_preview_template="+this.router.params.id}},methods:{resolveEditingItem:function(){var t=this,e=X(R(WpraTemplates.model_schema),this.$store.state.templates.preset);this.isLoading=!0,function(){var e=t.router.params.id;if(!e)return Promise.resolve(null);var n=t.$store.getters["templates/item"](e);return n?Promise.resolve(n):t.http.get(t.baseUrl+"/"+e).then(function(t){return t.data})}().then(function(n){if(t.isLoading=!1,!n)return t.$set(t,"model",e),void t.rememberModel();n=Object.assign({},n),t.model=X(t.model,n),t.rememberModel()})},save:function(){var t=this,e=!this.model.id;this.isSaving=!0,this.runRequest().then(function(n){t.model=X(t.model,n.data),t.rememberModel(),e&&t.router.navigate({name:"templates",params:{action:"edit",id:n.data.id}})}).finally(function(){t.notification.show("Template saved!",{type:"success",icon:function(t){return t.classList.add("dashicons","dashicons-yes"),t}}),t.isSaving=!1})},runRequest:function(){var t=this.model.id?"put":"post",e=this.model.id?this.baseUrl+"/"+this.model.id:this.baseUrl;return this.http[t](e,this.prepareModel())},prepareModel:function(){var t=this;return Object.keys(this.model).filter(function(t){return!["rest_route","slug","id"].includes(t)}).reduce(function(e,n){return e[n]=t.model[n],e},{})},getShortcode:function(){return'[wp-rss-aggregator template="'+this.model.slug+'"]'},preventLoosingNotSavedData:function(){return!this.isChanged()||confirm("Are you sure you want to go back? All unsaved changes will be lost.")},copyShortcode:function(t){Object(U.a)(this.getShortcode());var e=t.target.innerText;t.target.style.width=t.target.getBoundingClientRect().width+"px",t.target.disabled=!0,t.target.innerText="Copied!",setTimeout(function(){t.target.style.width=null,t.target.innerText=e,t.target.disabled=!1},5e3)}},render:function(){var t=this,e=arguments[0],n={name:"templates"},o=null,i=null;this.router.params.id&&(o=e("div",{attrs:{id:""},style:{padding:"6px 0"}},[e("div",{class:"misc-pub-section misc-pub-visibility",attrs:{id:"visibility"}},[e("a",{attrs:{href:this.previewUrl,role:"button",target:"_blank"},class:"edit-visibility",style:{marginLeft:"4px"}},[e("span",{attrs:{"aria-hidden":"true"}},["Preview On Your Site"])])])])),this.model.id&&(i=e("div",{class:"wpra-shortcode-copy",attrs:{title:"Copy chortcode"}},[e("div",{class:"wpra-shortcode-copy__content"},[e("strong",["Shortcode: "])," "+this.getShortcode()]),e("div",{class:"wpra-shortcode-copy__icon"},[e("button",k()([{class:"button"},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t.copyShortcode.apply(t,[e].concat(o))}}}]),["Copy Shortcode"])])]));var a=e("div",[e("div",{class:"page-title"},[e(T,{class:"back-button",attrs:{path:n,gate:this.preventLoosingNotSavedData}},[e("span",{class:"dashicons dashicons-arrow-left-alt"}),"Templates"]),e("h1",{class:"wp-heading-inline"},[this.router.params.id?"Edit Template":"New Template"]),i]),e("div",{attrs:{id:"poststuff"}},[this.isLoading?e("div",{class:"loading-container"}):e(J,{class:"metabox-holder columns-2"},[e(q,[e(B,{attrs:{id:"template-create",title:this.model.id?"Update Template":"Create Template",submit:!0}},[e("div",{class:"submitbox",attrs:{id:"submitpost"}},[o,e("div",{attrs:{id:"major-publishing-actions"}},[e("div",{attrs:{id:"delete-action"}},[this.isChanged()?e("a",k()([{attrs:{href:"#"},class:"submitdelete"},{on:{click:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){e.preventDefault(),t.cancelChanges()}).apply(void 0,[e].concat(o))}}}]),["Cancel Changes"]):null]),e("div",{attrs:{id:"publishing-action"}},[e(z,{class:"button-primary button-large",attrs:{loading:this.isSaving},nativeOn:{click:this.save}},[this.model.id?"Save":"Publish"])]),e("div",{class:"clear"})])])]),e(B,{attrs:{id:"template-link-preferences",title:"Link Preferences"}},[e(S,k()([{attrs:{type:"checkbox",label:"Set links as nofollow",value:this.model.options.links_nofollow}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.links_nofollow=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"select",label:"Open links behaviour",value:this.model.options.links_behavior,options:WpraTemplates.options.links_behavior},class:"form-input--vertical"},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.links_behavior=e}).apply(void 0,[e].concat(o))}}}]))]),e(B,{attrs:{id:"template-custom-css",title:"Custom CSS Class"}},[e(S,k()([{attrs:{type:"text",placeholder:"Enter custom CSS class name",value:this.model.options.custom_css_classname}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.custom_css_classname=e}).apply(void 0,[e].concat(o))}}}]))])]),e(V,[e(B,{attrs:{id:"template-details",title:"Template Details"}},[e(S,k()([{attrs:{type:"text",label:"Template name",value:this.model.name,disabled:"__built_in"===this.model.type}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.name=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"select",label:"Template type",value:this.model.type,options:this.typeOptions,disabled:"__built_in"===this.model.type}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.type=e}).apply(void 0,[e].concat(o))}}}])),"__built_in"===this.model.type?e("span",{style:{opacity:"0.6",display:"block"}},["This is default feed template. Create your own copy by duplicating it ðŸ™Œ"]):null]),e(B,{attrs:{id:"template-options",title:"Template Options"}},[e(S,k()([{attrs:{type:"checkbox",label:"Link title to original article",description:"Whether we should use a title as a link to the original article.",value:this.model.options.title_is_link}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.title_is_link=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"number",label:"Title maximum length",value:this.model.options.title_max_length}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.title_max_length=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"checkbox",label:"Show publish date",value:this.model.options.date_enabled},style:{paddingTop:"20px",fontWeight:"bold"}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.date_enabled=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"text",label:"Text preceeding date",value:this.model.options.date_prefix,disabled:!this.model.options.date_enabled}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.date_prefix=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"text",label:"Date format",value:this.model.options.date_format,disabled:this.model.options.date_use_time_ago||!this.model.options.date_enabled}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.date_format=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"checkbox",label:'Use "time ago" format',value:this.model.options.date_use_time_ago,disabled:!this.model.options.date_enabled}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.date_use_time_ago=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"checkbox",label:"Show source name",value:this.model.options.source_enabled},style:{paddingTop:"20px",fontWeight:"bold"}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.source_enabled=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"text",label:"Source prefix",value:this.model.options.source_prefix,disabled:!this.model.options.source_enabled}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.source_prefix=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"checkbox",label:"Link source name",value:this.model.options.source_is_link,disabled:!this.model.options.source_enabled}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.source_is_link=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"checkbox",label:"Show author name",value:this.model.options.author_enabled},style:{paddingTop:"20px",fontWeight:"bold"}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.author_enabled=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"text",label:"Text preceeding author name",value:this.model.options.author_prefix,disabled:!this.model.options.author_enabled}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.author_prefix=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"checkbox",label:"Pagination",value:this.model.options.pagination_enabled},style:{paddingTop:"20px",fontWeight:"bold"}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.pagination_enabled=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"select",label:"Pagination style",options:WpraTemplates.options.pagination_type,value:this.model.options.pagination_type,disabled:!this.model.options.pagination_enabled}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.pagination_type=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"checkbox",label:"Show bullets",value:this.model.options.bullets_enabled},style:{paddingTop:"20px",fontWeight:"bold"}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.bullets_enabled=e}).apply(void 0,[e].concat(o))}}}])),e(S,k()([{attrs:{type:"select",label:"Bullet style",options:WpraTemplates.options.bullet_type,value:this.model.options.bullet_type,disabled:!this.model.options.bullets_enabled}},{on:{input:function(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];(function(e){return t.model.options.bullet_type=e}).apply(void 0,[e].concat(o))}}}]))])])])])]);return this.hooks.apply("wpra-templates-form",this,a)}},tt=function(t){var e=t.store,n=t.router;return{store:e,data:function(){return{afterNavigate:function(){},params:{},currentRoute:null}},created:function(){n.setApp(this),this.currentRoute=n.parseLocation(window.location),this.navigated()},mounted:function(){var t=this;window.addEventListener("popstate",function(){t.currentRoute=n.parseLocation(window.location),t.navigated()})},methods:{ViewComponent:function(){return n.findRoute(this.currentRoute).component},navigated:function(){var t=this;this.$nextTick(function(){var e=t.$refs.main;e&&e.navigated&&e.navigated({route:n.findRoute(t.currentRoute)})})}},render:function(t){var e=t(this.ViewComponent(),{ref:"main"});return this.afterNavigate(),e}}},et=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),nt=function(t){t||(t=location.href);var e=t.indexOf("?"),n=t.indexOf("#");if(-1==n&&-1==e)return{};-1==n&&(n=t.length);var o=-1==e||n==e+1?t.substring(n):t.substring(e+1,n),i={};return o.split("&").forEach(function(t){if(t){t=t.split("+").join(" ");var e=t.indexOf("="),n=e>-1?t.substr(0,e):t,o=e>-1?decodeURIComponent(t.substr(e+1)):"",a=n.indexOf("[");if(-1==a)i[decodeURIComponent(n)]=o;else{var r=n.indexOf("]",a),s=decodeURIComponent(n.substring(a+1,r));n=decodeURIComponent(n.substring(0,a)),i[n]||(i[n]=[]),s?i[n][s]=o:i[n].push(o)}}}),i},ot=function(){function t(e,n){p(this,t),this.routes=e,this.options=n,this.baseParams=n.baseParams||["post_type","page","action","id"]}return t.prototype.setApp=function(t){this.app=t,this.app.afterNavigate=this.options.afterNavigating||function(){}},t.prototype.findRoute=function(t){return this.routes.find(function(e){var n=e.route;return-1!==t.indexOf(n)})},t.prototype.updateParams=function(t){this.app.$set(this.app,"params",t)},t.prototype.mergeParams=function(t){var e=this,n=Object.keys(this.params).filter(function(n){return-1!==e.baseParams.indexOf(n)||t.hasOwnProperty(n)}).reduce(function(t,n){return t[n]=e.params[n],t},{}),o=Object.assign({},n,t);this.updateParams(o),window.history.pushState(null,null,this.routeFromParams()),this.app.navigated()},t.prototype.routeFromParams=function(){var t=!!Object.keys(this.params).length;return location.pathname+(t?"?"+this.buildParams(this.params):"")},t.prototype.buildRoute=function(t){if(t.name){var e=this.routes.find(function(e){return e.name===t.name});if(!e)return null;var n=e.route,o=-1!==n.indexOf("?")?"&":"?";return n+(t.params?o+this.buildParams(t.params?t.params:{}):"")}},t.prototype.buildParams=function(t){return Object.keys(t).map(function(e){return e+"="+t[e]}).join("&")},t.prototype.parseLocation=function(t){return this.updateParams(nt(t.search)),nt(t.search),t.pathname+t.search},t.prototype.navigate=function(t){this.app&&(this.app.currentRoute=this.buildRoute(t)),this.updateParams(Object.assign({},t.params||{},nt(this.buildRoute(t)))),window.history.pushState(null,null,this.buildRoute(t)),this.app.navigated()},et(t,[{key:"params",get:function(){return this.app?this.app.params:{}}}]),t}(),it=ot,at={set:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.isInitialized=!0,t.items=e},updatePreset:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.preset=e}},rt={},st={isInitialized:!1,items:[],preset:{}},lt={item:function(t){return function(e){return N(t.items).find(e)}}},ut={namespaced:!0,mutations:at,actions:rt,state:st,getters:lt},ct=function(){function t(e,n){d(this,t),this.showMethod=e,this.errorMethod=n}return t.prototype.show=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.showMethod(t,e)},t.prototype.error=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errorMethod(t,e)},t}(),pt=ct,dt={register:function(t){return t.router=function(t){var e=t.document;return new it([{route:WpraGlobal.templates_url_base+"&action",name:"templates-form",component:Z},{route:WpraGlobal.templates_url_base,name:"templates",component:D}],{afterNavigating:function(){e.querySelector("html").scrollTop=0}})},t.App=function(t){return tt(t)},t.vuex=function(t){return t.vue.use(_.a),_.a},t.notification=function(t){var e=t.vue;return e.use(g.a,{position:"top-center",duration:4e3,iconPack:"callback"}),new pt(e.toasted.show,e.toasted.error)},t.store=function(t){return new t.vuex.Store({modules:{templates:ut},state:{}})},t.http=function(){var t=WpraGlobal&&WpraGlobal.nonce?{headers:{"X-WP-Nonce":WpraGlobal.nonce}}:{};return y.a.create(t)},t},run:function(t){t.container}},ht=n(5);n(41);var ft=h.Container,mt=h.Core,vt=h.Services;window.UiFramework&&(window.UiFramework=Object.assign({},window.UiFramework,mt.UiFramework));var yt={uiFramework:h,hooks:new vt.HookService,document:document,vue:function(t){return ht.a.use(t.uiFramework.Core.InjectedComponents,{container:t}),ht.a}},bt=new ft.ContainerFactory(m.a),gt=new mt.UiFramework.App(bt,yt);window.UiFramework.registerPlugin("templates-app",dt),gt.use(["templates-app"]),gt.init({"#wpra-templates-app":"App"})},41:function(t,e){}},[40])});